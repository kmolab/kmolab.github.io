Title: 電腦模擬
Date: 2017-06-05 02:29
Category: Simulation
Tags: 機械設計, 課程
Slug: first-simulation-blog
Author: kmol

紀錄與電腦模擬相關內容與紀錄， 使用工具 Python3, <a href="http://www.robodk.com/download">RoboDK</a>

<!-- PELICAN_END_SUMMARY -->

為什麼要模擬?假如要您負責送人登月,  不需模擬嗎?

幾天後就要接受面試, 需要先前排練嗎?

幾位好友要到墾丁旅遊, 需要事先安排好吃住與玩樂內容嗎?需要想想如何安排交通工具與路線嗎?

pyqt5 程式 <http://projects.skylogic.ca/blog/how-to-install-pyqt5-and-build-your-first-gui-in-python-3-4/>

run.py, 自行編寫用從 core/main.py 中導入 MainWindow 類別建立案例後執行

<pre class="brush: python">
if __name__ == "__main__":
    import sys
    from PyQt5.QtWidgets import QApplication
    
    from core.main import MainWindow
    
    app = QApplication(sys.argv)
    
    main = MainWindow()
    main.show()
    
    sys.exit(app.exec_())
</pre>

core/main.py, 以 main.ui 滑鼠右鍵 generate Dialog Code 產生

<pre class="brush: python">
# -*- coding: utf-8 -*-

"""
Module implementing MainWindow.
"""

from PyQt5.QtCore import pyqtSlot
from PyQt5.QtWidgets import QMainWindow

from PyQt5.QtCore import QLineF
from PyQt5.QtWidgets import QFrame
from PyQt5.QtWidgets import QGraphicsScene,  QGraphicsView,  QGraphicsEllipseItem

from .Ui_main import Ui_MainWindow


class MainWindow(QMainWindow, Ui_MainWindow):
    """
    Class documentation goes here.
    """
    def __init__(self, parent=None):
        """
        Constructor
        
        @param parent reference to the parent widget
        @type QWidget
        """
        super(MainWindow, self).__init__(parent)
        self.setupUi(self)
    
    @pyqtSlot()
    def on_actionAbout_triggered(self):
        """
        Slot documentation goes here.
        """
        # TODO: not implemented yet
        #raise NotImplementedError
        #建立景物
        scene = QGraphicsScene(-200, -200, 400, 400)
        # Create Ellipse Item
        item = QGraphicsEllipseItem(-150, -100, 300, 300)
        # Add item
        scene.addItem(item)
        # 納入繪圖物件
        scene.addText("終於可以!")
        scene.addLine(QLineF(0, 0, 200, 200))
        # set no frame to graphicsView
        self.graphicsView.setFrameShape(QFrame.NoFrame)
        # 在既有的 graphicsView 中設定景物
        # graphicsView in a layout and set layout to the grid to fit the size of window
        self.graphicsView.setScene(scene)

        # 顯示
        self.graphicsView.show()
    
    @pyqtSlot()
    def on_actionQuit_triggered(self):
        """
        Slot documentation goes here.
        """
        # TODO: not implemented yet
        #raise NotImplementedError
        self.close()
</pre>

core/Ui_main.py, 利用 main.ui 以 compile form 產生

<pre class="brush: python">

# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'Y:\tmp\pyqt5_vault\ex3\core\main.ui'
#
# Created by: PyQt5 UI code generator 5.8.2
#
# WARNING! All changes made in this file will be lost!

from PyQt5 import QtCore, QtGui, QtWidgets

class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(800, 600)
        self.centralWidget = QtWidgets.QWidget(MainWindow)
        self.centralWidget.setObjectName("centralWidget")
        self.graphicsView = QtWidgets.QGraphicsView(self.centralWidget)
        self.graphicsView.setGeometry(QtCore.QRect(-15, -29, 871, 581))
        self.graphicsView.setObjectName("graphicsView")
        MainWindow.setCentralWidget(self.centralWidget)
        self.menuBar = QtWidgets.QMenuBar(MainWindow)
        self.menuBar.setGeometry(QtCore.QRect(0, 0, 800, 22))
        self.menuBar.setObjectName("menuBar")
        self.menuFile = QtWidgets.QMenu(self.menuBar)
        self.menuFile.setObjectName("menuFile")
        MainWindow.setMenuBar(self.menuBar)
        self.actionAbout = QtWidgets.QAction(MainWindow)
        self.actionAbout.setObjectName("actionAbout")
        self.actionQuit = QtWidgets.QAction(MainWindow)
        self.actionQuit.setObjectName("actionQuit")
        self.menuFile.addAction(self.actionAbout)
        self.menuFile.addAction(self.actionQuit)
        self.menuBar.addAction(self.menuFile.menuAction())

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "MainWindow"))
        self.menuFile.setTitle(_translate("MainWindow", "File"))
        self.actionAbout.setText(_translate("MainWindow", "About"))
        self.actionQuit.setText(_translate("MainWindow", "Quit"))


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
</pre>

main.ui

<pre class="brush: xml">
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>800</width>
    <height>600</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <widget class="QWidget" name="centralWidget">
   <widget class="QGraphicsView" name="graphicsView">
    <property name="geometry">
     <rect>
      <x>-15</x>
      <y>-29</y>
      <width>871</width>
      <height>581</height>
     </rect>
    </property>
   </widget>
  </widget>
  <widget class="QMenuBar" name="menuBar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>800</width>
     <height>22</height>
    </rect>
   </property>
   <widget class="QMenu" name="menuFile">
    <property name="title">
     <string>File</string>
    </property>
    <addaction name="actionAbout"/>
    <addaction name="actionQuit"/>
   </widget>
   <addaction name="menuFile"/>
  </widget>
  <action name="actionAbout">
   <property name="text">
    <string>About</string>
   </property>
  </action>
  <action name="actionQuit">
   <property name="text">
    <string>Quit</string>
   </property>
  </action>
 </widget>
 <resources/>
 <connections/>
</ui>
</pre>